/*

 Copyright (c) 2014 Eben Packwood. All rights reserved.
 MIT License


 Copyright (c) 2014 Eben Packwood. All rights reserved.
 MIT License

*/
!function(B){if("object"==typeof exports)module.exports=B();else if("function"==typeof define&&define.amd)define(B);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self);f.wireframe=B()}}(function(){return function f(l,m,b){function p(g,d){if(!m[g]){if(!l[g]){var a="function"==typeof require&&require;if(!d&&a)return a(g,!0);if(h)return h(g,!0);throw Error("Cannot find module '"+g+"'");}a=m[g]={exports:{}};l[g][0].call(a.exports,function(a){var e=
l[g][1][a];return p(e?e:a)},a,a.exports,f,l,m,b)}return m[g].exports}for(var h="function"==typeof require&&require,k=0;k<b.length;k++)p(b[k]);return p}({1:[function(f,l,m){(function(b){!function(f){if("object"==typeof m)l.exports=f();else{var h;"undefined"!=typeof window?h=window:"undefined"!=typeof b?h=b:"undefined"!=typeof self&&(h=self);h.Colour=f()}}(function(){return function h(b,g,d){function a(e,q){if(!g[e]){if(!b[e]){var t="function"==typeof f&&f;if(!q&&t)return t(e,!0);if(c)return c(e,!0);
throw Error("Cannot find module '"+e+"'");}t=g[e]={exports:{}};b[e][0].call(t.exports,function(c){var q=b[e][1][c];return a(q?q:c)},t,t.exports,h,b,g,d)}return g[e].exports}for(var c="function"==typeof f&&f,e=0;e<d.length;e++)a(d[e]);return a}({1:[function(b,f,g){function d(q,d){var g,b,n={};"string"===typeof q?(q=q.toLowerCase(),q in r?n=r[q]:(n=e(q),r[q]=n),b=n,g=c(n.r,n.g,n.b),d=n.a||d||1):"r"in q?(b=q,g=c(q.r,q.g,q.b),d=g.a||d||1):"h"in q&&(g=q,b=a(q.h,q.s,q.l),d=b.a||d||1);this.rgb={r:b.r,g:b.g,
b:b.b};this.hsl={h:g.h,s:g.s,l:g.l};this.alpha=d}var a,c,e,r;d.prototype.lighten=function(a){var c=this.hsl;a=c.l+a;100<a&&(a=100);return new d({h:c.h,s:c.s,l:a},this.alpha)};d.prototype.darken=function(a){var c=this.hsl;a=c.l-a;0>a&&(a=0);return new d({h:c.h,s:c.s,l:a},this.alpha)};d.prototype.toHexString=function(){var a=this.rgb.r.toString(16),c=this.rgb.g.toString(16),e=this.rgb.b.toString(16);1===a.length&&(a="0"+a);1===c.length&&(c="0"+c);1===e.length&&(e="0"+e);return"#"+a+c+e};a=function(a,
c,e){function d(a,c,e){0>e&&(e+=1);1<e&&(e-=1);return e<1/6?a+(c-a)*e*6:.5>e?c:e<2/3?a+(c-a)*(2/3-e)*6:a}var g=e/100,b=c/100;if(0===c)return a=255*g,{r:a,g:a,b:a};c=50>=e?g*(1+b):g+b-g*b;g=2*g-c;a/=360;return{r:Math.round(255*d(g,c,a+1/3)),g:Math.round(255*d(g,c,a)),b:Math.round(255*d(g,c,a-1/3))}};c=function(a,c,e){a/=255;c/=255;e/=255;var d=Math.max(a,c,e),g=Math.min(a,c,e),b=Math.round((g+d)/2*100);100<b&&(b=100);0>b&&(b=0);var r;if(g===d)return{h:0,s:0,l:b};r=50>=b?(d-g)/(d+g):(d-g)/(2-d-g);var f=
(d-a)/(d-g),k=(d-c)/(d-g);e=(d-e)/(d-g);a=(a===d?e-k:c===d?2+f-e:4+k-f)/6%1;0>a&&(a+=1);a=Math.round(360*a);r=Math.round(100*r);360<a&&(a=360);0>a&&(a=0);100<r&&(r=100);0>r&&(r=0);return{h:a,s:r,l:b}};e=function(c){var e,d,g,b,r,f,k=1,h;b=c.substr(0,3);var l=!1;"hsl"===b?(h=/(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})/g,h=h.exec(c),b=parseInt(h[1],10),r=parseInt(h[2],10),f=parseInt(h[3],10),"a"===c[3]&&(h=/,\s*(\d\.?\d?)\s*\)/g,h=h.exec(c),k=parseFloat(h[1])),0>b||360<b||0>r||100<r||0>f||100<f||0>
k||1<k?l=!0:(g=a(b,r,f),e=g.r,d=g.g,g=g.b)):"rgb"===b?(h=/(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})/g,h=h.exec(c),e=parseInt(h[1],10),d=parseInt(h[2],10),g=parseInt(h[3],10),"a"===c[3]&&(h=/,\s*(\d\.?\d?)\s*\)/g,h=h.exec(c),k=parseFloat(h[1]))):"#"===c[0]?(b=c.substr(1),3===b.length?(e=parseInt(b[0]+b[0],16),d=parseInt(b[1]+b[1],16),g=parseInt(b[2]+b[2],16)):6===b.length?(e=parseInt(b[0]+b[1],16),d=parseInt(b[2]+b[3],16),g=parseInt(b[4]+b[5],16)):l=!0):l=!0;if(0>e||255<e||0>d||255<d||0>g||255<g||
0>k||1<k)l=!0;if(l)throw"ColorError: Something went wrong. Perhaps "+c+" is not a legal CSS color value";return{r:e,g:d,b:g,a:k}};r={black:{r:0,g:0,b:0,h:0,s:0,l:0},silver:{r:192,g:192,b:192,h:0,s:0,l:75},gray:{r:128,g:128,b:128,h:0,s:0,l:50},white:{r:255,g:255,b:255,h:0,s:0,l:100},maroon:{r:128,g:0,b:0,h:0,s:100,l:25},red:{r:255,g:0,b:0,h:0,s:100,l:50},purple:{r:128,g:0,b:128,h:300,s:100,l:25},fuchsia:{r:255,g:0,b:255,h:300,s:100,l:50},green:{r:0,g:128,b:0,h:120,s:100,l:25},lime:{r:0,g:255,b:0,h:120,
s:100,l:50},olive:{r:128,g:128,b:0,h:60,s:100,l:25},yellow:{r:255,g:255,b:0,h:60,s:100,l:50},navy:{r:0,g:0,b:128,h:240,s:100,l:25},blue:{r:0,g:0,b:255,h:240,s:100,l:50},teal:{r:0,g:128,b:128,h:180,s:100,l:25},aqua:{r:0,g:255,b:255,h:180,s:100,l:50},orange:{r:255,g:165,b:0,h:39,s:100,l:50},aliceblue:{r:240,g:248,b:255,h:208,s:100,l:97},antiquewhite:{r:250,g:235,b:215,h:34,s:78,l:91},aquamarine:{r:127,g:255,b:212,h:160,s:100,l:75},azure:{r:240,g:255,b:255,h:180,s:100,l:97},beige:{r:245,g:245,b:220,
h:60,s:56,l:91},bisque:{r:255,g:228,b:196,h:33,s:100,l:88},blanchedalmond:{r:255,g:235,b:205,h:36,s:100,l:90},blueviolet:{r:138,g:43,b:226,h:271,s:76,l:53},brown:{r:165,g:42,b:42,h:0,s:59,l:41},burlywood:{r:222,g:184,b:135,h:34,s:57,l:70},cadetblue:{r:95,g:158,b:160,h:182,s:25,l:50},chartreuse:{r:127,g:255,b:0,h:90,s:100,l:50},chocolate:{r:210,g:105,b:30,h:25,s:75,l:47},coral:{r:255,g:127,b:80,h:16,s:100,l:66},cornflowerblue:{r:100,g:149,b:237,h:219,s:79,l:66},cornsilk:{r:255,g:248,b:220,h:48,s:100,
l:93},cyan:{r:0,g:255,b:255,h:180,s:100,l:97},crimson:{r:220,g:20,b:60,h:348,s:83,l:47},darkblue:{r:0,g:0,b:139,h:240,s:100,l:27},darkcyan:{r:0,g:139,b:139,h:180,s:100,l:27},darkgoldenrod:{r:184,g:134,b:11,h:43,s:89,l:38},darkgray:{r:169,g:169,b:169,h:0,s:0,l:66},darkgreen:{r:0,g:100,b:0,h:120,s:100,l:20},darkgrey:{r:169,g:169,b:169,h:0,s:0,l:66},darkkhaki:{r:189,g:183,b:107,h:56,s:38,l:58},darkmagenta:{r:139,g:0,b:139,h:300,s:100,l:27},darkolivegreen:{r:85,g:107,b:47,h:82,s:39,l:30},darkorange:{r:255,
g:140,b:0,h:33,s:100,l:50},darkorchid:{r:153,g:50,b:204,h:280,s:61,l:50},darkred:{r:139,g:0,b:0,h:0,s:100,l:27},darksalmon:{r:233,g:150,b:122,h:15,s:72,l:70},darkseagreen:{r:143,g:188,b:143,h:120,s:25,l:65},darkslateblue:{r:72,g:61,b:139,h:248,s:39,l:39},darkslategray:{r:47,g:79,b:79,h:180,s:25,l:25},darkslategrey:{r:47,g:79,b:79,h:180,s:25,l:25},darkturquoise:{r:0,g:206,b:209,h:181,s:100,l:41},darkviolet:{r:148,g:0,b:211,h:282,s:100,l:41},deeppink:{r:255,g:20,b:147,h:328,s:100,l:54},deepskyblue:{r:0,
g:191,b:255,h:195,s:100,l:50},dimgray:{r:105,g:105,b:105,h:0,s:0,l:41},dimgrey:{r:105,g:105,b:105,h:0,s:0,l:41},dodgerblue:{r:30,g:144,b:255,h:210,s:100,l:56},firebrick:{r:178,g:34,b:34,h:0,s:68,l:42},floralwhite:{r:255,g:250,b:240,h:40,s:100,l:97},forestgreen:{r:34,g:139,b:34,h:120,s:61,l:34},gainsboro:{r:220,g:220,b:220,h:0,s:0,l:86},ghostwhite:{r:248,g:248,b:255,h:240,s:100,l:99},gold:{r:255,g:215,b:0,h:51,s:100,l:50},goldenrod:{r:218,g:165,b:32,h:43,s:74,l:49},greenyellow:{r:173,g:255,b:47,h:84,
s:100,l:59},grey:{r:128,g:128,b:128,h:0,s:0,l:50},honeydew:{r:240,g:255,b:240,h:120,s:100,l:97},hotpink:{r:255,g:105,b:180,h:330,s:100,l:71},indianred:{r:205,g:92,b:92,h:0,s:53,l:58},indigo:{r:75,g:0,b:130,h:275,s:100,l:25},ivory:{r:255,g:255,b:240,h:60,s:100,l:97},khaki:{r:240,g:230,b:140,h:54,s:77,l:75},lavender:{r:230,g:230,b:250,h:240,s:67,l:94},lavenderblush:{r:255,g:240,b:245,h:340,s:100,l:97},lawngreen:{r:124,g:252,b:0,h:90,s:100,l:49},lemonchiffon:{r:255,g:250,b:205,h:54,s:100,l:90},lightblue:{r:173,
g:216,b:230,h:195,s:53,l:79},lightcoral:{r:240,g:128,b:128,h:0,s:79,l:72},lightcyan:{r:224,g:255,b:255,h:180,s:100,l:94},lightgoldenrodyellow:{r:250,g:250,b:210,h:60,s:80,l:90},lightgray:{r:211,g:211,b:211,h:0,s:0,l:83},lightgreen:{r:144,g:238,b:144,h:120,s:73,l:75},lightgrey:{r:211,g:211,b:211,h:0,s:0,l:83},lightpink:{r:255,g:182,b:193,h:351,s:100,l:86},lightsalmon:{r:255,g:160,b:122,h:17,s:100,l:74},lightseagreen:{r:32,g:178,b:170,h:177,s:70,l:41},lightskyblue:{r:135,g:206,b:250,h:203,s:92,l:75},
lightslategray:{r:119,g:136,b:153,h:210,s:14,l:53},lightslategrey:{r:119,g:136,b:153,h:210,s:14,l:53},lightsteelblue:{r:176,g:196,b:222,h:214,s:41,l:78},lightyellow:{r:255,g:255,b:224,h:60,s:100,l:94},limegreen:{r:50,g:205,b:50,h:120,s:61,l:50},linen:{r:250,g:240,b:230,h:30,s:67,l:94},magenta:{r:255,g:0,b:255,h:17,s:100,l:74},mediumaquamarine:{r:102,g:205,b:170,h:160,s:51,l:60},mediumblue:{r:0,g:0,b:205,h:240,s:100,l:40},mediumorchid:{r:186,g:85,b:211,h:288,s:59,l:58},mediumpurple:{r:147,g:112,b:219,
h:260,s:60,l:65},mediumseagreen:{r:60,g:179,b:113,h:147,s:50,l:47},mediumslateblue:{r:123,g:104,b:238,h:249,s:80,l:67},mediumspringgreen:{r:0,g:250,b:154,h:157,s:100,l:49},mediumturquoise:{r:72,g:209,b:204,h:178,s:60,l:55},mediumvioletred:{r:199,g:21,b:133,h:322,s:81,l:43},midnightblue:{r:25,g:25,b:112,h:240,s:64,l:27},mintcream:{r:245,g:255,b:250,h:150,s:100,l:98},mistyrose:{r:255,g:228,b:225,h:6,s:100,l:94},moccasin:{r:255,g:228,b:181,h:38,s:100,l:85},navajowhite:{r:255,g:222,b:173,h:36,s:100,l:84},
oldlace:{r:253,g:245,b:230,h:39,s:85,l:95},olivedrab:{r:107,g:142,b:35,h:80,s:60,l:35},orangered:{r:255,g:69,b:0,h:16,s:100,l:50},orchid:{r:218,g:112,b:214,h:302,s:59,l:65},palegoldenrod:{r:238,g:232,b:170,h:55,s:67,l:80},palegreen:{r:152,g:251,b:152,h:120,s:93,l:79},paleturquoise:{r:175,g:238,b:238,h:180,s:65,l:81},palevioletred:{r:219,g:112,b:147,h:340,s:60,l:65},papayawhip:{r:255,g:239,b:213,h:37,s:100,l:92},peachpuff:{r:255,g:218,b:185,h:28,s:100,l:86},peru:{r:205,g:133,b:63,h:30,s:59,l:53},pink:{r:255,
g:192,b:203,h:350,s:100,l:88},plum:{r:221,g:160,b:221,h:300,s:47,l:75},powderblue:{r:176,g:224,b:230,h:187,s:52,l:80},rosybrown:{r:188,g:143,b:143,h:0,s:25,l:65},royalblue:{r:65,g:105,b:225,h:225,s:73,l:57},saddlebrown:{r:139,g:69,b:19,h:25,s:76,l:31},salmon:{r:250,g:128,b:114,h:6,s:93,l:71},sandybrown:{r:244,g:164,b:96,h:28,s:87,l:67},seagreen:{r:46,g:139,b:87,h:146,s:50,l:36},seashell:{r:255,g:245,b:238,h:25,s:100,l:97},sienna:{r:160,g:82,b:45,h:19,s:56,l:40},skyblue:{r:135,g:206,b:235,h:197,s:71,
l:73},slateblue:{r:106,g:90,b:205,h:248,s:53,l:58},slategray:{r:112,g:128,b:144,h:210,s:13,l:50},slategrey:{r:112,g:128,b:144,h:210,s:13,l:50},snow:{r:255,g:250,b:250,h:0,s:100,l:99},springgreen:{r:0,g:255,b:127,h:150,s:100,l:50},steelblue:{r:70,g:130,b:180,h:207,s:44,l:49},tan:{r:210,g:180,b:140,h:34,s:44,l:69},thistle:{r:216,g:191,b:216,h:300,s:24,l:80},tomato:{r:255,g:99,b:71,h:9,s:100,l:64},turquoise:{r:64,g:224,b:208,h:174,s:72,l:56},violet:{r:238,g:130,b:238,h:300,s:76,l:72},wheat:{r:245,g:222,
b:179,h:39,s:77,l:83},whitesmoke:{r:245,g:245,b:245,h:0,s:0,l:96},yellowgreen:{r:154,g:205,b:50,h:80,s:61,l:50}};f.exports=d},{}]},{},[1])(1)})}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(f,l,m){(function(b){!function(f){if("object"==typeof m)l.exports=f();else{var h;"undefined"!=typeof window?h=window:"undefined"!=typeof b?h=b:"undefined"!=typeof self&&(h=self);h.linearalgea=f()}}(function(){return function h(b,g,d){function a(e,q){if(!g[e]){if(!b[e]){var t=
"function"==typeof f&&f;if(!q&&t)return t(e,!0);if(c)return c(e,!0);throw Error("Cannot find module '"+e+"'");}t=g[e]={exports:{}};b[e][0].call(t.exports,function(c){var d=b[e][1][c];return a(d?d:c)},t,t.exports,h,b,g,d)}return g[e].exports}for(var c="function"==typeof f&&f,e=0;e<d.length;e++)a(d[e]);return a}({1:[function(b,f,g){g=b("./vector.js");b=b("./matrix.js");var d=Object.create(null);d.Vector=g;d.Matrix=b;f.exports=d},{"./matrix.js":2,"./vector.js":3}],2:[function(b,f,g){function d(){for(var a=
0;16>a;a++)this[a]=0;this.length=16}d.prototype.equal=function(a){for(var c=0,e=this.length;c<e;c++)if(this[c]!==a[c])return!1;return!0};d.prototype.add=function(a){for(var c=new d,e=0,b=this.length;e<b;e++)c[e]=this[e]+a[e];return c};d.prototype.subtract=function(a){for(var c=new d,e=0,b=this.length;e<b;e++)c[e]=this[e]-a[e];return c};d.prototype.multiplyScalar=function(a){for(var c=new d,e=0,b=this.length;e<b;e++)c[e]=this[e]*a;return c};d.prototype.multiply=function(a){var c=new d;c[0]=this[0]*
a[0]+this[1]*a[4]+this[2]*a[8]+this[3]*a[12];c[1]=this[0]*a[1]+this[1]*a[5]+this[2]*a[9]+this[3]*a[13];c[2]=this[0]*a[2]+this[1]*a[6]+this[2]*a[10]+this[3]*a[14];c[3]=this[0]*a[3]+this[1]*a[7]+this[2]*a[11]+this[3]*a[15];c[4]=this[4]*a[0]+this[5]*a[4]+this[6]*a[8]+this[7]*a[12];c[5]=this[4]*a[1]+this[5]*a[5]+this[6]*a[9]+this[7]*a[13];c[6]=this[4]*a[2]+this[5]*a[6]+this[6]*a[10]+this[7]*a[14];c[7]=this[4]*a[3]+this[5]*a[7]+this[6]*a[11]+this[7]*a[15];c[8]=this[8]*a[0]+this[9]*a[4]+this[10]*a[8]+this[11]*
a[12];c[9]=this[8]*a[1]+this[9]*a[5]+this[10]*a[9]+this[11]*a[13];c[10]=this[8]*a[2]+this[9]*a[6]+this[10]*a[10]+this[11]*a[14];c[11]=this[8]*a[3]+this[9]*a[7]+this[10]*a[11]+this[11]*a[15];c[12]=this[12]*a[0]+this[13]*a[4]+this[14]*a[8]+this[15]*a[12];c[13]=this[12]*a[1]+this[13]*a[5]+this[14]*a[9]+this[15]*a[13];c[14]=this[12]*a[2]+this[13]*a[6]+this[14]*a[10]+this[15]*a[14];c[15]=this[12]*a[3]+this[13]*a[7]+this[14]*a[11]+this[15]*a[15];return c};d.prototype.negate=function(){for(var a=new d,c=
0,e=this.length;c<e;c++)a[c]=-this[c];return a};d.prototype.transpose=function(){var a=new d;a[0]=this[0];a[1]=this[4];a[2]=this[8];a[3]=this[12];a[4]=this[1];a[5]=this[5];a[6]=this[9];a[7]=this[13];a[8]=this[2];a[9]=this[6];a[10]=this[10];a[11]=this[14];a[12]=this[3];a[13]=this[7];a[14]=this[11];a[15]=this[15];return a};d.rotationX=function(a){var c=new d,e=Math.cos(a);a=Math.sin(a);c[0]=1;c[5]=e;c[6]=-a;c[9]=a;c[10]=e;c[15]=1;return c};d.rotationY=function(a){var c=new d,e=Math.cos(a);a=Math.sin(a);
c[0]=e;c[2]=a;c[5]=1;c[8]=-a;c[10]=e;c[15]=1;return c};d.rotationZ=function(a){var c=new d,e=Math.cos(a);a=Math.sin(a);c[0]=e;c[1]=-a;c[4]=a;c[5]=e;c[10]=1;c[15]=1;return c};d.rotationAxis=function(a,c){var e=new d,b=a.normalize(),g=Math.sin(c),f=Math.cos(c),h=1-f,k=b.x,n=b.y,b=b.z,l=k*n,m=k*b,w=n*b;e[0]=f+k*k*h;e[1]=l*h-b*g;e[2]=m*h+n*g;e[4]=l*h+b*g;e[5]=f+n*n*h;e[6]=w*h-k*g;e[8]=m*h-n*g;e[9]=w*h+k*g;e[10]=f+b*b*h;e[15]=1;return e};d.rotation=function(a,c,e){return d.rotationX(e).multiply(d.rotationZ(c)).multiply(d.rotationY(a))};
d.translation=function(a,c,e){var b=d.identity();b[12]=a;b[13]=c;b[14]=e;return b};d.scale=function(a,c,e){var b=new d;b[0]=a;b[5]=c;b[10]=e;b[15]=1;return b};d.identity=function(){var a=new d;a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a};d.zero=function(){return new d};d.fromArray=function(a){for(var c=new d,e=0;16>e;e++)c[e]=a[e];return c};f.exports=d},{}],3:[function(b,f,g){function d(a,c,e){if("undefined"===typeof a||"undefined"===typeof c||"undefined"===typeof e)throw Error("Insufficient arguments.");
this.x=a;this.y=c;this.z=e}d.prototype.add=function(a){return new d(this.x+a.x,this.y+a.y,this.z+a.z)};d.prototype.subtract=function(a){return new d(this.x-a.x,this.y-a.y,this.z-a.z)};d.prototype.equal=function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z};d.prototype.angle=function(a){var c=this.normalize();a=a.normalize();var e=c.magnitude(),b=a.magnitude();if(0===e||0===b)return 0;c=c.dot(a)/(e*b);-1>c&&(c=-1);1<c&&(c=1);return Math.acos(c)};d.prototype.cosAngle=function(a){var c=this.normalize();
a=a.normalize();var e=c.magnitude(),b=a.magnitude();if(0===e||0===b)return 0;c=c.dot(a)/(e*b);-1>c&&(c=-1);1<c&&(c=1);return c};d.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};d.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z};d.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};d.prototype.cross=function(a){return new d(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)};d.prototype.normalize=
function(){var a=this.magnitude();return 0===a?this:new d(this.x/a,this.y/a,this.z/a)};d.prototype.scale=function(a){return new d(this.x*a,this.y*a,this.z*a)};d.prototype.negate=function(){return new d(-this.x,-this.y,-this.z)};d.prototype.vectorProjection=function(a){var c=a.magnitude();return a.scale(this.dot(a)/(c*c))};d.prototype.scalarProjection=function(a){return this.dot(a)/a.magnitude()};d.prototype.transform=function(a){var c=this.x*a[3]+this.y*a[7]+this.z*a[11]+a[15];return new d((this.x*
a[0]+this.y*a[4]+this.z*a[8]+a[12])/c,(this.x*a[1]+this.y*a[5]+this.z*a[9]+a[13])/c,(this.x*a[2]+this.y*a[6]+this.z*a[10]+a[14])/c)};d.prototype.rotate=function(a,c){var e=a.normalize(),b=Math.sin(c),g=Math.cos(c),f=1-g,h=e.x,k=e.y,n=e.z,l=e.x*e.y,m=e.x*e.z,e=e.y*e.z;return new d((g+h*h*f)*this.x+(l*f-n*b)*this.y+(m*f+k*b)*this.z,(l*f+n*b)*this.x+(g+k*k*f)*this.y+(e*f-h*b)*this.z,(m*f-k*b)*this.x+(e*f+h*b)*this.y+(g+h*h*f)*this.z)};d.prototype.rotateX=function(a){var c=Math.sin(a);a=Math.cos(a);return new d(this.x,
a*this.y-c*this.z,c*this.y+a*this.z)};d.prototype.rotateY=function(a){var c=Math.sin(a);a=Math.cos(a);return new d(a*this.x+c*this.z,this.y,-(c*this.x)+a*this.z)};d.prototype.rotateZ=function(a){var c=Math.sin(a);a=Math.cos(a);return new d(a*this.x-c*this.y,c*this.x+a*this.y,this.z)};d.prototype.rotatePitchYawRoll=function(a,c,e){return this.rotateX(e).rotateY(a).rotateZ(c)};f.exports=d},{}]},{},[1])(1)})}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],3:[function(f,
l,m){function b(b,d,a){this.position=a||new p(1,1,20);this.up=new p(0,1,0);this.rotation={yaw:0,pitch:0,roll:0};this.view_matrix=this.createViewMatrix();this.width=b;this.height=d;this.near=.1;this.far=1E3;this.fov=90;this.perspectiveFov=this.calculatePerspectiveFov()}f=f("linearalgea");var p=f.Vector,h=f.Matrix,k=2*Math.PI;b.prototype.direction=function(){var b=Math.sin(this.rotation.pitch),d=Math.cos(this.rotation.pitch),a=Math.sin(this.rotation.yaw),c=Math.cos(this.rotation.yaw);return new p(-d*
a,b,-d*c)};b.prototype.calculatePerspectiveFov=function(){var b=Math.PI/180*this.fov,d=this.width/this.height,a=this.near,c=this.far,e=h.zero(),b=1/Math.tan(b/2)*this.height;e[0]=b*d;e[5]=b;e[10]=c/(a-c);e[11]=-1;e[14]=a*c/(a-c);return e};b.prototype.createViewMatrix=function(){var b=this.position,d=this.rotation.pitch,a=this.rotation.yaw,c=Math.cos(d),d=Math.sin(d),e=Math.cos(a),f=Math.sin(a),a=new p(e,0,-f),k=new p(f*d,c,e*d),c=new p(f*c,-d,c*e);return h.fromArray([a.x,k.x,c.x,0,a.y,k.y,c.y,0,a.z,
k.z,c.z,0,-a.dot(b),-k.dot(b),-c.dot(b),1])};b.prototype.moveTo=function(b,d,a){this.position=new p(b,d,a);this.view_matrix=this.createViewMatrix()};b.prototype.move=function(b,d,a){this.position.x+=b;this.position.y+=d;this.position.z+=a;this.view_matrix=this.createViewMatrix()};b.prototype.moveRight=function(b){b=this.up.cross(this.direction()).normalize().scale(b);this.position=this.position.subtract(b);this.view_matrix=this.createViewMatrix()};b.prototype.moveLeft=function(b){b=this.up.cross(this.direction()).normalize().scale(b);
this.position=this.position.add(b);this.view_matrix=this.createViewMatrix()};b.prototype.look=function(b,d){this.rotation.yaw-=b;0>this.rotation.yaw?this.rotation.yaw+=k:this.rotation.yaw>k&&(this.rotation.yaw-=k);this.rotation.pitch-=d;0>this.rotation.pitch?this.rotation.pitch+=k:this.rotation.pitch>k&&(this.rotation.pitch-=k);this.view_matrix=this.createViewMatrix()};b.prototype.turnRight=function(b){this.rotation.yaw-=b;0>this.rotation.yaw&&(this.rotation.yaw+=k);this.view_matrix=this.createViewMatrix()};
b.prototype.turnLeft=function(b){this.rotation.yaw+=b;this.rotation.yaw>k&&(this.rotation.yaw-=k);this.view_matrix=this.createViewMatrix()};b.prototype.lookUp=function(b){this.rotation.pitch-=b;this.rotation.pitch>k&&(this.rotation.pitch-=k);this.view_matrix=this.createViewMatrix()};b.prototype.lookDown=function(b){this.rotation.pitch+=b;0>this.rotation.pitch&&(this.rotation.pitch+=k);this.view_matrix=this.createViewMatrix()};b.prototype.moveUp=function(b){b=this.up.normalize().scale(b);this.position=
this.position.subtract(b);this.view_matrix=this.createViewMatrix()};b.prototype.moveDown=function(b){b=this.up.normalize().scale(b);this.position=this.position.add(b);this.view_matrix=this.createViewMatrix()};b.prototype.moveForward=function(b){b=this.direction().scale(b);this.position=this.position.add(b);this.view_matrix=this.createViewMatrix()};b.prototype.moveBackward=function(b){b=this.direction().scale(b);this.position=this.position.subtract(b);this.view_matrix=this.createViewMatrix()};l.exports=
b},{linearalgea:2}],4:[function(f,l,m){m=f("./scene.js");f=f("./camera.js");var b=Object.create(null);b.Scene=m;b.Camera=f;l.exports=b},{"./camera.js":3,"./scene.js":6}],5:[function(f,l,m){l.exports={_listeners:{},addListener:function(b,f){b in this._listeners||(this._listeners[b]=[]);this._listeners[b].push(f)},fire:function(b,f){var h={};"undefined"!==typeof f&&(h=f);h.event=b;h.target=this;var k=this._listeners[b];if("undefined"!==typeof k)for(var g=0,d=k.length;g<d;g++)k[g].call(this,h)},removeListener:function(b,
f){for(var h=this._listeners[b],k=0,g=h.length;k<g;k++)h[k]===f&&h.splice(k,1)}}},{}],6:[function(f,l,m){function b(a){this.width=a.width;this.height=a.height;this.canvas=document.getElementById(a.canvas_id);this.ctx=this.canvas.getContext("2d");this.camera=new p(this.width,this.height);this.illumination=new d(90,0,0);this.meshes={};this._x_offset=Math.round(this.width/2);this._y_offset=Math.round(this.height/2);this._back_buffer=document.createElement("canvas");this._back_buffer.width=this.width;
this._back_buffer.height=this.height;this._back_buffer_ctx=this._back_buffer.getContext("2d");this._back_buffer_image=null;this._depth_buffer=[];this._backface_culling=!0;this._keys={};this._key_count=0;this._anim_id=null;this._needs_update=!0;this._draw_mode=0;this.canvas.tabIndex=1;this._back_buffer_image=this._back_buffer_ctx.createImageData(this.width,this.height);this.canvas.addEventListener("keydown",this.onKeyDown.bind(this),!1);this.canvas.addEventListener("keyup",this.onKeyUp.bind(this),
!1);this.canvas.addEventListener("blur",this.emptyKeys.bind(this),!1);this.canvas.addEventListener("mousedown",this.onMouseDown.bind(this),!1);this.canvas.addEventListener("mouseup",this.onMouseUp.bind(this),!1);this.canvas.addEventListener("mousemove",this.onMouseMove.bind(this),!1);this.initializeDepthBuffer();this.update()}m=f("linearalgea");var p=f("./camera.js"),h=f("./events.js"),k=f("../utilities/mixin.js"),g=f("../utilities/keycodes.js"),d=m.Vector,a=m.Matrix;k(b.prototype,h);b.prototype.emptyKeys=
function(){this._key_count=0;this._keys={}};b.prototype.isKeyDown=function(a){a=g[a];return a in this._keys&&this._keys[a]};b.prototype.onKeyDown=function(a){a=a.keyCode||a.which;this.isKeyDown(a)||(this._key_count+=1,this._keys[a]=!0)};b.prototype.onKeyUp=function(a){a=a.keyCode||a.which;a in this._keys&&(this._key_count-=1,this._keys[a]=!1)};b.prototype._getMousePos=function(a){var b=this.canvas.getBoundingClientRect();return{x:a.clientX-b.left,y:a.clientY-b.top}};b.prototype.onMouseDown=function(a){this._last_mouse_update=
this._last_mouse_coords=void 0;a={mouse:this._getMousePos(a)};this.fire("mousedown",a);var b=this.onMouseDrag.bind(this),d=function(){this.removeEventListener("mousemove",b,!1);this.removeEventListener("mouseup",d,!1);this._last_mouse_update=this._last_mouse_coords=void 0};this.canvas.addEventListener("mousemove",b,!1);this.canvas.addEventListener("mouseup",d,!1);this.canvas.addEventListener("mouseleave",d,!1)};b.prototype.onMouseUp=function(a){a={mouse:this._getMousePos(a)};this.fire("mouseup",a)};
b.prototype.onMouseMove=function(a){a={mouse:this._getMousePos(a)};this.fire("mousemove",a)};b.prototype.onMouseDrag=function(a){a=this._getMousePos(a);"undefined"===typeof this._last_mouse_coords&&(this._last_mouse_coords=a);"undefined"===typeof this._last_mouse_update&&(this._last_mouse_update=new Date);var b=new Date-this._last_mouse_update,d=a.x-this._last_mouse_coords.x,f=a.y-this._last_mouse_coords.y,g=0,h=0;0<b&&(g=d/b,h=f/b);d={mouse:{x:a.x,y:a.y,xvel:g,yvel:h,deltax:d,deltay:f}};this._last_mouse_coords=
a;this._last_mouse_update=b;this.fire("mousedrag",d)};b.prototype.initializeDepthBuffer=function(){for(var a=0,b=this.width*this.height;a<b;a++)this._depth_buffer[a]=9999999};b.prototype.offscreen=function(a){var b=a.x+this._x_offset,d=a.y+this._y_offset;return 1<a.z||0>b||b>this.width||0>d||d>this.height};b.prototype.toggleDrawMode=function(){this._draw_mode=(this._draw_mode+1)%2;this.renderScene()};b.prototype.toggleBackfaceCulling=function(){this._backface_culling=!this._backface_culling;this.renderScene()};
b.prototype.drawPixel=function(a,b,d,f){a+=this._x_offset;b+=this._y_offset;if(0<=a&&a<this.width&&0<=b&&b<this.height&&(a+=b*this.width,d<this._depth_buffer[a])){b=this._back_buffer_image.data;var g=4*a;b[g]=f.r;b[g+1]=f.g;b[g+2]=f.b;b[g+3]=255;this._depth_buffer[a]=d}};b.prototype.drawEdge=function(a,b,d){var f=Math.abs;if(a.x>=b.x){var g=a;a=b;b=g}var g=a.x,h=a.y,k=a.z,f=Math.max(f(b.x-a.x),f(b.y-a.y),f(b.z-a.z)),n=(b.x-a.x)/f,l=(b.y-a.y)/f;a=(b.z-a.z)/f;for(b=0;b<f;b++)this.drawPixel(Math.floor(g),
Math.floor(h),k,d),g+=n,h+=l,k+=a};b.prototype.drawTriangle=function(a,b,d,f){this.drawEdge(a,b,f);this.drawEdge(b,d,f);this.drawEdge(d,a,f)};b.prototype.fillTriangle=function(a,b,d,f){var g=a.x,h=b.x,k=d.x,n=a.y,l=b.y,m=d.y;a=a.z;b=b.z;d=d.z;var p=0-this._x_offset,u=this.width-this._x_offset,v=0-this._y_offset,s=this.height-this._y_offset,x=Math.floor(Math.min(g,h,k));x<p&&(x=p);p=Math.ceil(Math.max(g,h,k));p>u&&(p=u);u=Math.floor(Math.min(n,l,m));u<v&&(u=v);v=Math.ceil(Math.max(n,l,m));v>s&&(v=
s);for(var C=m-n,A=g-k,y=n-l,s=h-g,z=k*n-g*m,g=g*l-h*n,h=C*h+A*l+z,n=y*k+s*m+g,k=C/h,m=A/h,h=z/h,l=y/n,s=s/n,g=g/n;x<=p;x++)for(n=u;n<=v;n++)y=k*x+m*n+h,0<=y&&1>=y&&(z=l*x+s*n+g,0<=z&&1>=z&&(A=1-y-z,0<=A&&1>=A&&this.drawPixel(x,n,A*a+y*b+z*d,f)))};b.prototype.renderScene=function(){this._back_buffer_image=this._back_buffer_ctx.createImageData(this.width,this.height);this.initializeDepthBuffer();var b=this.camera.view_matrix,d=this.camera.perspectiveFov,f=this.illumination,g;for(g in this.meshes)if(this.meshes.hasOwnProperty(g))for(var h=
this.meshes[g],k=h.scale,l=h.rotation,n=h.position,k=a.scale(k.x,k.y,k.z).multiply(a.rotation(l.pitch,l.yaw,l.roll).multiply(a.translation(n.x,n.y,n.z))),l=0;l<h.faces.length;l++){var m=h.faces[l].face,n=h.faces[l].color,p=h.vertices[m[0]],w=h.vertices[m[1]],u=h.vertices[m[2]],v=this.camera.position.subtract(p.transform(k)),m=w.transform(k).subtract(p.transform(k)),s=u.transform(k).subtract(p.transform(k)),m=m.cross(s);1E-8>=m.magnitude()||(m=m.normalize());if(!this._backface_culling||0<=v.dot(m))s=
k.multiply(b).multiply(d),v=p.transform(s),w=w.transform(s),u=u.transform(s),s=!0,this.offscreen(v)&&this.offscreen(w)&&this.offscreen(u)&&(s=!1),s&&(0===this._draw_mode?this.drawTriangle(v,w,u,n.rgb):1===this._draw_mode&&(p=f.subtract(p.transform(k)).normalize(),p=m.dot(p),n=n.lighten(15*p),this.fillTriangle(v,w,u,n.rgb)))}this._back_buffer_ctx.putImageData(this._back_buffer_image,0,0);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.ctx.drawImage(this._back_buffer,0,0,this.canvas.width,
this.canvas.height)};b.prototype.addMesh=function(a){this.meshes[a.name]=a};b.prototype.removeMesh=function(a){delete this.meshes[a.name]};b.prototype.update=function(){0<this._key_count&&this.fire("keydown");this._needs_update&&(this.renderScene(),this._needs_update=!1);this._anim_id=window.requestAnimationFrame(this.update.bind(this))};l.exports=b},{"../utilities/keycodes.js":11,"../utilities/mixin.js":12,"./camera.js":3,"./events.js":5,linearalgea:2}],7:[function(f,l,m){m=f("./geometry/geometry.js");
f=f("./engine/engine.js");var b=Object.create(null);b.geometry=m;b.engine=f;l.exports=b},{"./engine/engine.js":4,"./geometry/geometry.js":9}],8:[function(f,l,m){var b=f("colour");l.exports=function(f,h,k,g){this.face=[f,h,k];this.color=new b(g)}},{colour:1}],9:[function(f,l,m){m=f("./mesh.js");f=f("./face.js");var b=Object.create(null);b.Mesh=m;b.Face=f;l.exports=b},{"./face.js":8,"./mesh.js":10}],10:[function(f,l,m){function b(b,f,d){this.name=b;this.vertices=f;this.faces=d;this.position=new p(0,
0,0);this.rotation={yaw:0,pitch:0,roll:0};this.scale={x:1,y:1,z:1}}var p=f("linearalgea").Vector,h=f("./face.js");b.fromJSON=function(f){for(var g=[],d=[],a=0,c=f.vertices.length;a<c;a++){var e=f.vertices[a];g.push(new p(e[0],e[1],e[2]))}a=0;for(c=f.faces.length;a<c;a++)e=f.faces[a],d.push(new h(e.face[0],e.face[1],e.face[2],e.color));return new b(f.name,g,d)};l.exports=b},{"./face.js":8,linearalgea:2}],11:[function(f,l,m){l.exports={space:32,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,
caps_lock:20,escape:27,page_up:33,"page down":34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,"left_window key":91,"right_window key":92,select_key:93,"numpad 0":96,"numpad 1":97,"numpad 2":98,"numpad 3":99,"numpad 4":100,"numpad 5":101,"numpad 6":102,"numpad 7":103,"numpad 8":104,
"numpad 9":105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,equal_sign:187,comma:188,dash:189,period:190,forward_slash:191,grave_accent:192,open_bracket:219,backslash:220,closebracket:221,single_quote:222}},{}],12:[function(f,l,m){l.exports=function(b,f){for(var h in f)f.hasOwnProperty(h)&&(b[h]=f[h]);return b}},{}]},{},[7])(7)});
